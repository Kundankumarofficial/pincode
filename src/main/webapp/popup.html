<html>
<head>
    <title> Flipkart.com </title>

    <!--<script src="getPincode.js" type="text/javascript"></script>-->
    <script type="text/javascript">
        var cuteLittleWindow;
        var pincode2;
        var geocoder = new google.maps.Geocoder();


        function popup(){
            //      alert("called");
            cuteLittleWindow = window.open("trial.html", "littleWindow", "location=no,width=600,height=500");
            //    alert("call ended");
        }
        // document.getElementById("textbox").value="560034";

        function getAutogeneratedPincode()
        {
            alert("autogenerated called");
                  if (navigator.geolocation)
             {
             navigator.geolocation.getCurrentPosition(function showPosition(position)
             {
             getcodePosition(new google.maps.LatLng(position.coords.latitude,
             position.coords.longitude));

             });
             }

            document.getElementById("textbox").value = pincode2;
        }
        function geocodePosition(pos) {
            geocoder.geocode({
                latLng: pos
            }, function(responses) {
                if (responses && responses.length > 0) {
                    pincode2=responses[0].formatted_address;
                  //  getPinCode(responses);
                    //  infowindow.setContent(address);

                } else {
                    address="Cannot determine address at this location.";
                }
            });
        }

        function getPinCode(response)
        {
            pincode2 = null;
            var addressComponents = response[0].address_components;
            for(var i=0; i<addressComponents.length; i++)
            {
                var types = addressComponents[i].types;
                for(var j=0; j<types.length; j++)
                {
                    if(types[j]=="postal_code")
                        pincode2 = addressComponents[i].long_name;
                }
            }
            //window.opener.getPincodeFromChild(pincode);

        }

        function getPincodeFromChild(pincode)
        {
            //  alert(pincode);
            document.getElementById("textbox").value = pincode;
        }

    </script>
</head>
<body>

<input id="textbox" type="text"/>
<script type="text/javascript">

    alert("before autogenerated");
    getAutogeneratedPincode();
</script>

<a href="javascript:popup()">Change</a>



</body>
</html>